(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7933],{1259:function(e,s,n){Promise.resolve().then(n.bind(n,9529))},9529:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return z}});var t=n(5452),a=n(74983),i=n(63942),l=n(46330),r=n(7323),d=n(87656),o=n(95695),c=n(1654),u=n(79362),x=n(59325),m=n(7594),h=n(87945);let w=(0,c.vU)({addedToQueue:{id:"useCreateBulkDownload.addedToQueue",description:"Notification message for when a new bulk download is added to the queue",defaultMessage:"Preparing download"},error:{id:"useCreateBulkDownload.error",description:"Notification message for when a bulk download fails",defaultMessage:"Error creating download"}});var j=n(80743),f=n(23651),v=n(19197),p=n(90188),g=n(59153),N=n(93890),k=n(88894),y=n(64125),b=n(96826);function S(){let e=(0,d.Z)(),{clearSelection:s}=N.ZP.useActions();return(0,t.jsx)(g.IB,{className:"relative flex items-center rounded-[24px] p-2",display:g.lN.animatePresence,children:(0,t.jsxs)(g.Ze,{className:"left-1/2 -translate-x-1/2",children:[(0,t.jsxs)("div",{className:"flex min-w-96 items-center justify-between gap-9",children:[(0,t.jsx)(Z,{}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(C,{}),(0,t.jsxs)(k.z,{variant:"blur",size:"icon",onClick:()=>{s()},children:[(0,t.jsx)(b.x8,{className:"h-6 w-6"}),(0,t.jsx)("div",{className:"sr-only",children:(0,t.jsx)(o.Z,{...E.clearSelection})})]})]})]}),(0,t.jsx)(p.q,{group:"BulkAsyncActions",label:e.formatMessage(E.clearSelection),shortcuts:["ESCAPE"],handler:()=>{s()}})]})})}function Z(){var e;let s=N.ZP.useState(e=>e.selectedItems),n=N.ZP.useState(e=>e.maxSelectedItems);return(0,t.jsxs)("div",{className:"pl-2 font-mono text-token-text-tertiary",children:[(0,v.qA)(s.length,null!==(e=null==n?void 0:n.toString().length)&&void 0!==e?e:2)," / ",n]})}function C(){let e=(0,f.cn)(),{data:s}=(0,j.Uc)(),n=N.ZP.useState(e=>e.selectedItems),a=!!(null==s?void 0:s.can_download_without_watermark)||e,{mutate:i}=function(){let e=(0,u.useQueryClient)(),s=(0,d.Z)();return(0,h.R)({success:()=>({message:s.formatMessage(w.addedToQueue)}),error:()=>({message:s.formatMessage(w.error)})},{mutationFn:e=>x.Z.bulkDownload(e),onSettled:()=>{e.invalidateQueries({queryKey:m.gr})},onSuccess:()=>{}})}();return(0,t.jsxs)(y.h_,{children:[(0,t.jsx)(y.$F,{asChild:!0,children:(0,t.jsxs)(k.z,{children:[(0,t.jsx)(b.UW,{className:"h-[18px] w-[18px]"}),(0,t.jsx)(o.Z,{...E.download})]})}),(0,t.jsxs)(y.AW,{children:[(0,t.jsx)(y.Ju,{className:"font-normal text-neutral-400",children:(0,t.jsx)(o.Z,{...E.download})}),(0,t.jsxs)(y.Xi,{className:"justify-between",onClick:()=>{i({generationIds:n.map(e=>e.id),collectionIds:[],watermarked:!0})},children:[(0,t.jsxs)("div",{className:"flex flex-1 items-center gap-2",children:[(0,t.jsx)(b.il,{className:"h-[18px] w-[18px] flex-row"}),(0,t.jsx)("div",{children:(0,t.jsx)(o.Z,{...E.media})})]}),(0,t.jsx)("div",{className:"text-token-text-tertiary",children:(0,t.jsx)(o.Z,{...E.watermark})})]}),(0,t.jsxs)(y.Xi,{onClick:()=>{i({generationIds:n.map(e=>e.id),collectionIds:[],watermarked:!1})},disabled:!a,children:[(0,t.jsx)(b.hk,{className:"h-[18px] w-[18px]"}),(0,t.jsx)("div",{children:(0,t.jsx)(o.Z,{...E.media})})]})]})]})}let E=(0,c.vU)({media:{id:"download.media",defaultMessage:"Media",description:"Media download option"},watermark:{id:"download.watermark",defaultMessage:"Watermark",description:"Watermark download option"},download:{id:"download.download",defaultMessage:"Download",description:"Download action"},clearSelection:{id:"download.clearSelection",defaultMessage:"Clear selection",description:"Clear selection action"}});var M=n(38581),P=n(18825),I=n(95035),_=n(49660),A=n(97652),B=n(79145);let W=e=>{let{children:s}=e,n=(0,B.rY)();return(0,t.jsx)("div",{className:"sticky box-content w-[--sidebar-width] flex-shrink-0 overflow-y-auto px-[--sidebar-gap] max-tablet:hidden",style:{top:n,height:"calc(100vh - ".concat(n,"px)")},children:s})};n(81748),n(65676);var D=n(94286),O=n(88029),Q=n(1751);function z(e){let{children:s}=e,n=_.Z.useState(e=>e.isOpen),i=function(){let[e,s]=(0,r.useState)({x:window.innerWidth/2,y:window.innerHeight/2});return(0,r.useEffect)(()=>{let e=()=>{s({x:window.scrollX+window.innerWidth/2,y:window.scrollY+window.innerHeight/2})};return window.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[]),e}(),d=(0,O.dD)(),o=(0,l.usePathname)(),c=(0,P.UJ)(o),u=(0,I.Gt)(o),x=_.Z.useActions();(0,r.useEffect)(()=>(x.setHasCustomRootPageAnimation(!0),()=>{x.setHasCustomRootPageAnimation(!1)}),[x]);let m={animate:{opacity:n?0:1,scale:n?D.mm:1},transition:{...D.hc,delay:n?0:D.Nk}},h=(0,r.useMemo)(()=>(0,t.jsxs)(t.Fragment,{children:[null!=c&&(0,t.jsx)(P.Qt,{...c}),null!=u&&(0,t.jsx)(I.wW,{...u})]}),[c,u]);return(0,t.jsxs)(N.ZP.Provider,{initialStoreState:e=>{e.maxSelectedItems=100},children:[(0,t.jsx)("div",{className:"h-full max-h-screen min-h-screen w-full",children:(0,t.jsx)(a.E.div,{className:"min-h-screen w-full",style:{transformOrigin:"".concat(i.x,"px ").concat(i.y,"px")},...m,children:(0,t.jsxs)("div",{className:"relative flex min-h-screen",children:[(0,t.jsx)(W,{children:(0,t.jsx)(Q.aO,{})}),(0,t.jsx)("div",{className:"flex-1",children:s}),null]})})}),(0,t.jsxs)(a.E.div,{className:"pointer-events-none fixed inset-0",...m,children:[(0,t.jsx)(A.JL,{asTabBarOnMobile:!0,actionButtons:h}),!d&&(0,t.jsx)(L,{})]})]})}function L(){let e=(0,N.NS)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.$d,{children:(0,t.jsx)(g.IB,{display:e?g.lN.hidden:g.lN.visible,children:(0,t.jsx)(M.Z,{})})}),(0,t.jsx)(i.M,{initial:!0,children:e?(0,t.jsx)(g.$d,{children:(0,t.jsx)(S,{})}):null})]})}}},function(e){e.O(0,[3346,434,4526,1210,1213,7652,5445,8825,1744],function(){return e(e.s=1259)}),_N_E=e.O()}]);
//# sourceMappingURL=layout-9592b088983c546a.js.map